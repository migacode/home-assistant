# =============================================================================
# Behälter-Entnahme-Messung (BEM) - Templates
# Einbindung in der configuration.yaml unter dem Bereich "template:"
# Version: 1.10
# -----------------------------------------------------------------------------
# ACHTUNG: 'sensor.behaelter_fuellstand_aktuell' durch die Entitäts-ID
#          des eigenen tatsächlichen Sensors ersetzen, sowie die Kapazität in
#          der Formel (Wert 10000) an die Größe des eigenen Behälters anpassen.
# =============================================================================
# -----------------------------------------------------------------------------
# Umwandlung von in Helfern gespeicherten Werten zur Verwendung im Dashboard
# -----------------------------------------------------------------------------
  - sensor:
    - name: "Behälter Entnahme letzte (gerundet)"
      state: "{{ states('input_number.bem_entnahme_letzte') | round(0) }}"
  - sensor:
    - name: "Behälter Entnahme gesamt (gerundet)"
      state: "{{ states('input_number.bem_entnahme_gesamt') | round(0) }}"
  - sensor:
    - name: "Behälter Entnahme gesamt (m3)"
      state: "{{ (states('input_number.bem_entnahme_gesamt') | float / 1000) | round(2) }}"
# -----------------------------------------------------------------------------
# Umwandlung von echtem gemessenen Füllstand zur Verwendung im Dashboard
# -----------------------------------------------------------------------------
  - sensor:
    - name: "Behälter Füllstand aktuell (gerundet)"
      state: "{{ states('sensor.behaelter_fuellstand_aktuell') | float | round(0) }}"
  - sensor:
    - name: "Behälter Füllstand aktuell (prozent)"
      state: "{{ ((states('sensor.behaelter_fuellstand_aktuell') | float) / 10000 * 100) | round(2) }}"
