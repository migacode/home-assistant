# =============================================================================
# Behälter-Entnahme-Messung (BEM) - Templates
# Version: 1.20
# =============================================================================
# -----------------------------------------------------------------------------
# Umwandlung von in Helfern gespeicherten Werten zur Verwendung im Dashboard
# -----------------------------------------------------------------------------
  - sensor:
    - name: "BEM Entnahme letzte gerundet"
      state: "{{ states('input_number.bem_entnahme_letzte') | round(0) }}"
  - sensor:
    - name: "BEM Entnahme gesamt gerundet"
      state: "{{ states('input_number.bem_entnahme_gesamt') | round(0) }}"
  - sensor:
    - name: "BEM Entnahme gesamt in m3"
      state: "{{ (states('input_number.bem_entnahme_gesamt') | float / 1000) | round(2) }}"
# -----------------------------------------------------------------------------
# Umwandlung von echtem gemessenen Füllstand zur Verwendung im Dashboard
# -----------------------------------------------------------------------------
# ACHTUNG: 'sensor.behaelter_fuellstand_aktuell' durch die Entitäts-ID
#          des eigenen tatsächlichen Sensors ersetzen, sowie die Kapazität in
#          der Formel für die prozentuale Angabe des Füllstandes (Wert 5000)
#          an die Größe (maximaler Füllstand) des eigenen Behälters anpassen.
# -----------------------------------------------------------------------------
  - sensor:
    - name: "BEM Fuellstand aktuell gerundet"
      state: "{{ states('sensor.behaelter_fuellstand_aktuell') | float | round(0) }}"
  - sensor:
    - name: "BEM Fuellstand aktuell prozentual"
      state: "{{ ((states('sensor.behaelter_fuellstand_aktuell') | float) / 5000 * 100) | round(2) }}"
